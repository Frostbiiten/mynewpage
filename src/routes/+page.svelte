<script>
    //carouselImg = [...carouselImg, ...carouselImg];
    import grid from "$lib/img/projects/null.png"

    import smile from "$lib/img/smile.png"

    import bg from "$lib/img/bg.webp"
    import bgbokeh from "$lib/img/bgbokeh.webp"

    // import figure from "$lib/img/figure.webp"
    import figure from "$lib/img/figure/0.webp"
    import figure2 from "$lib/img/figure/1.webp"

    import creativeImg from "$lib/img/categories/creative.webp"
    import blogImg from "$lib/img/categories/blog.webp"
    import projectImg from "$lib/img/categories/project.webp"

    import { onMount, onDestroy } from 'svelte';
    import { faGit, faGithub, faLinkedinIn, faTwitter } from '@fortawesome/free-brands-svg-icons'
    import Fa from "svelte-fa";
    import { faAt, faEnvelope, faPaperPlane, faSquareArrowUpRight } from "@fortawesome/free-solid-svg-icons";
    import { cubicInOut } from "svelte/easing";
    import Loader from "$lib/components/loader.svelte"
    import cx from "clsx"

    let figureWidth = $state(0);
    let figureHeight = $state(0);

    function handleLoad(e) {
      figureWidth = e.target.naturalWidth;
      figureHeight = e.target.naturalHeight;
    }

    const imgRadius = 600;
    let angle = 0;
    let rafId2;

    const images = import.meta.glob('$lib/img/projects/*', { eager: true });
    let carouselImg = $state(Object.values(images).map(img => img.default));

    let targetX = $state(0);
    let targetY = $state(0);
    let smoothX = $state(0);
    let smoothY = $state(0);
    let dist01 = $state(0);

    let rafId = $state(null);
    let isMobile = $state(false);
    let browser = $state(false);



    const Dist = (x1, y1, x2, y2) => {
      return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
    };

    const easeInOutCubic = (x) => {
      return x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2;
    };

    const easeOutCubic = (x) => {
      return 1 - Math.pow(1 - x, 3);
    }

    const updateMouse = (e) => {
      const { innerWidth, innerHeight } = window;
      targetX = (e.clientX / innerWidth - 0.5) * 2;
      targetY = (e.clientY / innerHeight - 0.5) * 2;

      const imgElement = document.querySelector('.figure');
      if (imgElement) {
        const rect = imgElement.getBoundingClientRect();
        const imgCenterX = rect.left + rect.width / 2;
        const imgCenterY = rect.top + rect.height / 2;
        const distance = Dist(e.clientX, e.clientY, imgCenterX, imgCenterY);
        const maxDistance = Math.sqrt(innerWidth * innerWidth + innerHeight * innerHeight) / 2;
        dist01 = Math.min(distance / maxDistance, 1);
      }
    };

    const updateTilt = (e) => {
      targetX = e.gamma ? e.gamma / 45 : 0;
      targetY = e.beta ? e.beta / 45 : 0;
    };

    const animate = () => {
      smoothX += (targetX - smoothX) * 0.05;
      smoothY += (targetY - smoothY) * 0.05;

      rafId = requestAnimationFrame(animate);
    };



  onDestroy(() => {
    if (!browser) return;
    
    window.removeEventListener('mousemove', updateMouse);
    window.removeEventListener('deviceorientation', updateTilt);
    if (rafId) cancelAnimationFrame(rafId);
  });

  let scroll = $state(0)
  let baseFrequency = $state(0.05);
  let scale = $state(0.10);
  let baseFrequency2 = $state(0.05);
  let scale2 = $state(0.10);

  $effect(() => {
    const interval = setInterval(() => {
      baseFrequency = 0.03 + Math.random() * 0.03;
      scale = 4 + Math.random() * 0.5;
    }, 200);

    const interval2 = setInterval(() => {
      baseFrequency2 = 0.003 + Math.random() * 0.005;
      scale2 = 3 + Math.random() * 10;
    }, 400);

    return () => {clearInterval(interval); clearInterval(interval2);}
  });

  let characterhover = $state(false);
  import talkSoundFile from '$lib/sound/talk.mp3'; 
  import talkSoundFile2 from '$lib/sound/boop.mp3'; 
  import { base } from "$app/paths";
  let talkSound;
  let talkSound2;

  function figureTalk()
  {
    talkSound.currentTime = 0;
    talkSound.play();
    talkSound2.currentTime = 0;
    talkSound2.play();
    characterhover = true;
  }
  function figureTalkEnd()
  {
    characterhover = false;
  }

  const infoStatements =
  {
    "projects": "here are some cool projects i have been working on !",
    "blog": "wip coming soon",
    "creative": "wip coming soon",
  }

  let infoText = $state("")
  function setInfo(key)
  {
    infoText = infoStatements[key];
  }
  function clearInfo()
  {
    infoText = "";
  }

  onMount(() => {
    browser = true;

    talkSound = new Audio(talkSoundFile);
    talkSound.volume = 0.1;

    talkSound2 = new Audio(talkSoundFile2);
    talkSound2.volume = 0.1;
    
    // Mobile
    isMobile = typeof navigator !== 'undefined' && /Mobi|Android/i.test(navigator.userAgent);

    if (isMobile && window.DeviceOrientationEvent) {
      if (DeviceOrientationEvent.requestPermission) {
        DeviceOrientationEvent
          .requestPermission()
          .then((response) => {
            if (response === 'granted') {
              window.addEventListener('deviceorientation', updateTilt);
            }
          })
          .catch(console.error);
      } else {
        window.addEventListener('deviceorientation', updateTilt);
      }
    } else {
      window.addEventListener('mousemove', updateMouse);
    }

    rafId = requestAnimationFrame(animate);
  });
</script>

<svelte:window bind:scrollY={scroll}/>

<style>
  .grain {
    content: "";
    background-color: transparent;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 600 600'%3E%3Cfilter id='a'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23a)'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 80px;
    height: 150%;
    width: 150%;
    position: absolute;
    opacity: 1;
    pointer-events: none;
    z-index: 10;
    animation: animateGrain 10s steps(10) infinite;
    mix-blend-mode: soft-light;
  }

  @keyframes animateGrain {
    0%, 100% { transform: scale(1.1) translate(0, 0) }
    10% { transform: scale(1.1) translate(-2%, -5%) }
    20% { transform: scale(1.1) translate(-5%, -10%) }
    30% { transform: scale(1.1) translate(-2%, -5%) }
    40% { transform: scale(1.1) translate(-5%, -10%) }
    50% { transform: scale(1.1) translate(-5%, -5%) }
    60% { transform: scale(1.1) translate(-2%, -10%) }
    70% { transform: scale(1.1) translate(-5%, -5%) }
    80% { transform: scale(1.1) translate(-2%, -10%) }
    90% { transform: scale(1.1) translate(-5%, -5%) }
    100% { transform: scale(1.1) translate(-2%, -10%) }
  }

  @keyframes spin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
  }

  @keyframes spin2 {
  from { transform: rotate(0deg); }
  to   { transform: rotate(51.4285714deg); }
  }

  @keyframes spin3 {
  from   { transform: rotate(360deg); }
  to { transform: rotate(0deg); }
  }

  .animate-spin-slow {
    animation: spin 25s linear infinite;
  }

  .animate-spin-slow-2 {
    animation: spin2 23s linear infinite;
  } 
  
  .animate-spin-slow-3 {
    animation: spin3 16s linear infinite;
  }

  @keyframes revealZoom {
    0% {
      filter: brightness(100) blur(5px);
      transform: scale(1.05);
      animation-timing-function: cubic-bezier(0,1,0,1);
    }

    20% {
      filter: brightness(4) blur(10px);
      transform: scale(0.95);
    }

    40% {
      filter: brightness(0.8) blur(4px);
      transform: scale(1.03);
    }

    100% {
      filter: brightness(1) blur(0px);
      transform: scale(1);
    }
  }

  .reveal-zoom {
    animation: revealZoom 3s forwards;
  }

  @keyframes boop {
		0% {
      animation-timing-function: ease-out;
      transform: scaleX(1) scaleY(1);
    }
		30% {
      transform: scaleX(1.03) scaleY(0.95);
    }
		70% {
      animation-timing-function: ease-in;
      transform: scaleX(0.98) scaleY(1.02);
    }
		100% {
      transform: scaleX(1) scaleY(1);
    }
	}

	.boop-anim {
		animation: boop 0.4s forwards;
	}

  @keyframes wave {
    to {
      transform: translateY(-5px);
    }
  }

  .animate-wave {
    animation: wave 0.25s infinite alternate ease-in-out;
  }

  @keyframes text-reveal {
    0% {
        opacity: 0;
        transform: translateX(1.5rem) scaleX(1);
    }
    100% {
        opacity: 1;
        transform: translateX(0) scaleX(1);
    }
  }

  .animate-text-reveal {
    transform-origin: left;
    animation: text-reveal 1.2s cubic-bezier(1, 0, 0, 1) 20s forwards;
  }
</style>


  <div class="flex absolute z-0 justify-center -mt-10 w-full overflow-clip select-none h-250">
    <div class="relative h-250 w-7xl">


      <div 
        class="absolute left-0 opacity-10 h-50 w-50 bg-[radial-gradient(#e5e7eb_4px,transparent_1px)] [background-size:48px_48px]"
        style="transform: translate3d({smoothX * -30 - 400}px, {smoothY * -30 + 180 }px, 0);">
      </div>

      <div 
        class="absolute left-0 opacity-15 h-24 w-50 bg-[radial-gradient(#e5e7eb_4px,transparent_1px)] [background-size:52px_52px] blur-sm"
        style="transform: translate3d({smoothX * -100 - 500}px, {smoothY * -100 + 480 }px, 0);">
      </div>

      <div 
        class="absolute left-0 opacity-15 h-24 w-50 bg-[radial-gradient(#e5e7eb_4px,transparent_1px)] [background-size:48px_48px] blur-xs"
        style="transform: translate3d({smoothX * -35 - 800}px, {smoothY * -35 + 280 }px, 0);">
      </div>

      <div 
        class="absolute left-0 opacity-15 h-20 w-20 bg-[radial-gradient(#e5e7eb_4px,transparent_1px)] [background-size:52px_52px] blur-md"
        style="transform: translate3d({smoothX * -30 - 700}px, {smoothY * -30 + 580 }px, 0);">
      </div>

      <div 
        class="absolute left-0 opacity-5 h-50 w-80 bg-[radial-gradient(#e5e7eb_2px,transparent_1px)] [background-size:36px_36px]"
        style="transform: translate3d({smoothX * -9 - 580}px, {smoothY * -9 + 280 }px, 0);">
      </div>

      <div 
        class="absolute left-0 opacity-15 h-130 w-120 bg-[radial-gradient(#6a707d_2px,transparent_1px)] [background-size:38px_38px] blur-xs"
        style="transform: translate3d({smoothX * -6 - 400}px, {smoothY * -6 + 280 }px, 0);">
      </div>

      <div 
        class="absolute left-0 opacity-10 h-50 w-50 bg-[radial-gradient(#e5e7eb_4px,transparent_1px)] [background-size:48px_48px]"
        style="transform: translate3d({smoothX * -30 - 400}px, {smoothY * -30 + 180 }px, 0);">
      </div>

      <div 
        class="absolute right-0 opacity-15 h-24 w-50 bg-[radial-gradient(#e5e7eb_4px,transparent_1px)] [background-size:52px_52px] blur-sm"
        style="transform: translate3d({smoothX * -100 + 400}px, {smoothY * -100 + 280 }px, 0);">
      </div>

      <div 
        class="absolute right-0 opacity-15 h-24 w-50 bg-[radial-gradient(#e5e7eb_4px,transparent_1px)] [background-size:48px_48px] blur-xs"
        style="transform: translate3d({smoothX * -35 + 400}px, {smoothY * -35 + 480 }px, 0);">
      </div>

      <div 
        class="absolute right-0 opacity-15 h-20 w-20 bg-[radial-gradient(#e5e7eb_4px,transparent_1px)] [background-size:52px_52px] blur-md"
        style="transform: translate3d({smoothX * -30 + 700}px, {smoothY * -30 + 380 }px, 0);">
      </div>

      <div 
        class="absolute right-0 opacity-5 h-50 w-80 bg-[radial-gradient(#e5e7eb_2px,transparent_1px)] [background-size:36px_36px]"
        style="transform: translate3d({smoothX * -9 + 580}px, {smoothY * -9 + 380 }px, 0);">
      </div>

      <div 
        class="absolute right-0 opacity-15 h-130 w-120 bg-[radial-gradient(#6a707d_2px,transparent_1px)] [background-size:38px_38px] blur-xs"
        style="transform: translate3d({smoothX * -6 + 400}px, {smoothY * -6 + 280 }px, 0);">
      </div>

    </div>

  </div>

<div class="flex flex-col items-center -mt-5 w-full">
    <div class="flex flex-col gap-7 justify-center items-center px-8 w-full max-w-7xl">
      <div class="z-2 img relative w-full h-[40rem] rounded-xl select-none border-2 border-slate-800/40 overflow-clip bg-clip-padding">
        <div class="absolute top-0 left-0 p-12 w-full h-full">

          <div
            class={cx(
              "absolute left-0 top-0 min-w-7xl scale-[1.2] image duration-200 transition-all",
              !characterhover && "brightness-100",
              characterhover && "brightness-10"
              )}
            style="transform: translate3d({smoothX * 10}px, {smoothY * -5 - 610}px, 0) scale({1 + dist01 * 0.01});"
          >
            <div class="absolute top-0 left-[-100%] w-[300%] h-screen bg-black"></div>
            <img
              class="absolute top-0 left-0 min-w-7xl"
              src={bg}
              alt="Parallax"
              style="filter: blur({easeInOutCubic(1-dist01) * 8}px)"
            />
            <img
              class="absolute top-0 left-0 min-w-7xl"
              src={bgbokeh}
              alt="Parallax"
              style="opacity: {easeInOutCubic(1-dist01)};"
            />

            <div class="absolute top-0 left-0 w-full h-full">
              <div
              style="width: 300%;"
              class="absolute top-0 left-0 h-full bg-gradient-to-tr to-amber-400 from-0% to-80% mix-blend-soft-light  from-sky-900"></div>
              <div
              style="width: 300%;"
              class="absolute top-0 left-0 h-full bg-gradient-to-tr to-amber-300 from-0% to-70% mix-blend-overlay  from-indigo-900"></div>
            </div>

            <div class="absolute top-0 left-0 w-screen h-screen bg-blue-400/0 z-[10] mix-blend-multiply">
            </div>
          </div>


          <div class={cx("absolute top-0 left-0 z-10 w-full h-full duration-700 transition-transform ease-[cubic-bezier(1, 0, 0, 1)]", characterhover && "-translate-1/8 opacity-20")} style="filter: blur({easeInOutCubic(Math.abs(1- dist01)) * 4}px);">
            {#each { length: 12 }, i}
            <div class="absolute top-10 left-10 w-0 h-0 duration-700 animate-spin-slow">
                  <div
                    class="z-10 origin-top-left w-[10rem] h-[20rem]"
                    style="transform: rotate({i / 12 * 360}deg);"
                    >
                      <div
                      class="w-36 h-36 rounded-full border-blue-900/90"
                      style="border-width: {3.5 - easeInOutCubic(dist01) * 3}px; transform: translate3d(0px, -80px, 0);">
                      </div>
                    </div>
              </div>
            {/each}
          </div>

          <div
            class="absolute pointer-events-none top-0 left-0 z-[36] w-full h-full mix-blend-exclusion origin-right"
            style="filter: blur({easeInOutCubic(Math.abs(1 - dist01)) * 2}px); transform: scale({(1 + easeOutCubic(dist01) * -0.01)});"
          >
            {#each { length: 7 }, i}
            <div
            class="absolute right-0 bottom-0 px-56 py-56 w-0 h-0 animate-spin-slow-2">
                  <div
                    class="origin-top-left w-[10rem] h-[20rem]"
                    style="transform: scale({1 - dist01 * 0.01}) rotate({i / 7 * 360}deg);">
                      <div
                      class="w-[8rem] h-[8rem] text-blue-400/90 text-[14rem] font-bold"
                      style="transform: translate3d(0px, -340px, 0); ">
                        <div  class="w-100 h-100">
                          <svg viewBox="0 0 300 300">
                            <defs>
                              <filter id="warbleFilter">
                                <feTurbulence 
                                  type="turbulence" 
                                  baseFrequency={baseFrequency} 
                                  numOctaves="2" 
                                  result="turbulence"
                                />
                                <feDisplacementMap 
                                  in="SourceGraphic" 
                                  in2="turbulence" 
                                  scale={scale} 
                                  xChannelSelector="R" 
                                  yChannelSelector="G"
                                />
                              </filter>
                            </defs>
                            
                            <path 
                              du="M28.6441 85.8866C30.2844 78.4384 32.5029 69.5028 36.4247 62.1051C38.3819 58.4082 40.7573 55.1035 43.6554 52.5328C46.5582 49.962 49.967 48.1098 54.1132 47.2632C57.3686 46.6147 59.499 47.1077 61.1067 48.1601C62.712 49.2202 63.9089 51.0182 64.7612 53.3521C66.4831 58.0004 66.6404 64.4973 66.718 69.2621C66.7312 70.0737 67.3227 70.8192 68.0982 71.0134C68.8671 71.2348 69.7525 70.8892 70.1897 70.163C72.3624 66.5632 75.6388 61.1538 79.5209 55.655C83.3973 50.164 87.8961 44.5836 92.3821 40.7158C94.62 38.778 96.8502 37.2752 98.9231 36.3937C101.005 35.5044 102.872 35.2365 104.58 35.5744C106.286 35.9239 107.976 36.8636 109.752 38.9023C111.516 40.9372 113.288 44.0749 114.889 48.5446C116.224 52.2687 116.311 55.8297 116.313 60.1868C116.313 61.1498 116.928 62.0431 117.795 62.3848C118.653 62.7498 119.717 62.5478 120.407 61.8488C125.154 57.0412 132.094 50.8357 139.318 47.131C142.925 45.2748 146.581 44.0517 150.007 43.8264C153.446 43.609 156.628 44.3041 159.725 46.3817C159.987 46.5564 160.249 46.7466 160.511 46.9446C162.17 48.2106 163.347 49.5271 164.176 50.8824C165.003 52.2415 165.492 53.6396 165.724 55.1269C166.188 58.0899 165.568 61.4682 164.17 64.9632C161.398 71.957 155.589 79.1451 151.293 83.9332C150.62 84.6827 150.457 85.7895 150.855 86.671C151.232 87.5642 152.153 88.1971 153.167 88.2126C156.366 88.2631 159.889 88.0145 163.418 87.8903C166.943 87.766 170.465 87.766 173.537 88.2475C176.621 88.7252 179.184 89.6689 181.019 91.2377C181.944 92.026 182.718 92.9736 183.347 94.1969C183.974 95.424 184.453 96.9385 184.706 98.8413C185.104 101.707 184.267 105.509 182.361 109.482C180.469 113.454 177.563 117.582 174.143 121.213C170.727 124.844 166.794 127.986 162.929 130.055C159.062 132.141 155.3 133.104 152.272 132.739C151.56 132.661 151.175 132.506 151.126 132.467C151.119 132.467 151.121 132.467 151.119 132.463C151.121 132.467 151.128 132.471 151.138 132.479C151.159 132.494 151.194 132.525 151.234 132.568C151.317 132.657 151.416 132.816 151.467 132.98C151.521 133.143 151.528 133.294 151.522 133.376C151.519 133.415 151.514 133.442 151.512 133.453C151.511 133.457 151.511 133.453 151.511 133.457C151.511 133.453 151.513 133.449 151.516 133.442C151.538 133.368 151.673 133.104 151.92 132.797C152.41 132.164 153.314 131.364 154.209 130.77C154.656 130.467 155.101 130.215 155.474 130.036C155.842 129.857 156.152 129.764 156.221 129.753C157.905 129.43 159.287 129.399 160.387 129.554C161.489 129.706 162.307 130.032 162.954 130.451C163.598 130.875 164.088 131.399 164.484 132.067C164.877 132.731 165.164 133.542 165.317 134.474C165.63 136.338 165.369 138.68 164.538 140.936C163.714 143.2 162.336 145.363 160.601 146.959C155.179 151.981 147.043 156.12 138.368 158.982C129.698 161.856 120.483 163.483 112.963 163.735C112.328 163.759 111.35 163.646 110.243 163.37C109.132 163.098 107.883 162.675 106.626 162.143C104.11 161.087 101.552 159.569 99.8551 158.085C99.0059 157.347 98.3814 156.621 98.0657 156.078C97.9057 155.806 97.8222 155.588 97.788 155.452C97.7535 155.308 97.7616 155.258 97.764 155.235C97.7706 155.215 97.7651 155.204 97.8222 155.114C97.8797 155.033 98.0148 154.874 98.2979 154.672C98.8563 154.264 100.011 153.732 101.815 153.309C101.955 153.274 102.066 153.25 102.143 153.239C102.181 153.235 102.211 153.231 102.23 153.227C102.249 153.227 102.252 153.227 102.255 153.227C102.245 153.211 102.024 153.281 101.441 153.002C101.161 152.858 100.803 152.571 100.56 152.179C100.31 151.786 100.209 151.344 100.2 151.025C100.199 150.377 100.358 150.19 100.37 150.136C100.373 150.128 100.375 150.124 100.376 150.12C100.375 150.124 100.377 150.12 100.376 150.124C100.374 150.128 100.367 150.136 100.355 150.155C100.333 150.187 100.294 150.241 100.24 150.307C100.132 150.439 99.9681 150.625 99.7643 150.835C99.3553 151.254 98.7888 151.775 98.1484 152.318C96.8657 153.41 95.2814 154.609 93.921 155.549C93.2418 156.019 92.6155 156.427 92.1281 156.722C91.8858 156.866 91.6773 156.982 91.5297 157.06C91.4567 157.099 91.3988 157.126 91.3658 157.141C91.3336 157.157 91.3243 157.157 91.3658 157.141C85.9439 158.982 79.9555 160.78 73.9457 161.957C67.937 163.133 61.9117 163.677 56.4513 163.079C52.7369 162.667 50.5064 161.448 49.1161 159.945C47.7352 158.439 47.0471 156.474 46.997 154.074C46.95 151.689 47.6048 148.948 48.8412 146.334C50.0718 143.717 51.8741 141.235 53.9827 139.321C54.7726 138.599 55.936 137.872 57.3402 137.255C58.7433 136.638 60.3809 136.117 62.1016 135.733C65.5402 134.96 69.3265 134.739 72.2428 135.096C73.6971 135.267 74.9309 135.585 75.7386 135.954C76.1432 136.137 76.4376 136.323 76.6154 136.475C76.796 136.626 76.8558 136.727 76.8756 136.766C76.8927 136.809 76.8974 136.801 76.8978 136.898C76.8943 136.991 76.864 137.201 76.7016 137.55C76.3894 138.241 75.5122 139.414 73.8754 140.832C72.6902 141.868 70.8281 142.936 68.5467 143.826C66.2652 144.723 63.5683 145.46 60.7016 145.954C54.6899 147.006 47.917 146.979 42.5704 145.526C39.8948 144.808 37.5916 143.744 35.8764 142.393C34.1553 141.033 33.0054 139.445 32.4094 137.418C31.8288 135.403 31.8556 133.888 32.1896 132.665C32.5321 131.442 33.1981 130.424 34.2458 129.473C35.2888 128.525 36.7206 127.69 38.4087 127.019C40.0948 126.347 42.0268 125.838 44.0228 125.492C48.0141 124.797 52.2698 124.747 55.3508 125.057C56.8828 125.209 58.141 125.461 58.7941 125.683C58.9549 125.737 59.0749 125.784 59.1382 125.815C59.2015 125.842 59.2077 125.854 59.1347 125.799C59.066 125.745 58.8994 125.621 58.7075 125.29C58.5153 124.98 58.3577 124.378 58.4644 123.846C58.2547 125.015 57.7616 125.892 56.8766 126.751C55.9943 127.601 54.6794 128.366 53.0037 128.956C49.6575 130.156 44.9525 130.607 40.0975 130.366C35.2391 130.133 30.211 129.24 26.1285 127.954C24.0886 127.314 22.2848 126.58 20.8775 125.815C19.4678 125.058 18.4714 124.25 18.019 123.656C15.687 120.65 14.6793 117.446 14.5842 113.974C14.5088 110.922 15.164 107.664 16.3763 104.363C17.5864 101.062 19.3486 97.7267 21.4188 94.5579C25.5561 88.2126 30.9325 82.5314 35.4356 79.0015C36.2375 78.3724 35.2131 76.9394 34.3607 77.4986C29.3753 80.7684 23.3438 86.0962 18.4974 92.4998C16.0761 95.6997 13.9527 99.1714 12.4262 102.802C10.9028 106.433 9.9708 110.231 10.0007 114.048C10.0252 118.363 11.3113 122.708 14.2378 126.557C15.3119 127.955 16.7876 129.046 18.5455 130.04C20.3058 131.022 22.3652 131.88 24.6326 132.622C29.1645 134.102 34.5281 135.104 39.8311 135.41C45.1377 135.706 50.3639 135.325 54.7104 133.826C56.8816 133.073 58.8539 132.02 60.448 130.525C62.0398 129.038 63.213 127.042 63.6079 124.743C63.7489 124.013 63.552 123.217 63.251 122.716C62.9508 122.196 62.6064 121.881 62.2965 121.64C61.6693 121.178 61.0958 120.945 60.4593 120.724C59.2015 120.304 57.6812 120.025 55.8832 119.835C52.304 119.469 47.691 119.501 43.125 120.277C40.8424 120.669 38.5737 121.244 36.4515 122.083C34.3312 122.922 32.3476 124.025 30.6824 125.52C29.0223 127.007 27.688 128.933 27.0523 131.244C26.4085 133.546 26.4799 136.144 27.2811 138.905C28.1925 142.086 30.1244 144.684 32.5752 146.598C35.031 148.524 37.9889 149.829 41.179 150.691C47.5632 152.4 54.94 152.377 61.6158 151.227C64.7981 150.676 67.8186 149.86 70.5015 148.808C73.1845 147.752 75.5339 146.47 77.3871 144.866C79.3613 143.138 80.7298 141.538 81.5484 139.814C81.9519 138.952 82.2082 138.043 82.2443 137.103C82.2843 136.168 82.0812 135.216 81.675 134.401C81.2711 133.581 80.6918 132.906 80.0487 132.37C79.4025 131.83 78.6887 131.415 77.9323 131.073C76.4182 130.397 74.7173 130.005 72.8774 129.784C69.2045 129.349 64.9589 129.62 60.935 130.514C58.9242 130.964 56.9725 131.57 55.1799 132.362C53.3886 133.154 51.7498 134.125 50.3825 135.364C47.7108 137.799 45.5318 140.812 44.0022 144.051C42.4788 147.293 41.5938 150.765 41.6489 154.167C41.701 157.553 42.7561 160.943 45.1808 163.568C47.597 166.205 51.2349 167.902 55.8727 168.395C62.0953 169.071 68.6139 168.442 74.972 167.199C81.3294 165.957 87.5303 164.085 93.0822 162.201C93.4387 162.077 93.7028 161.949 93.9917 161.801C94.2764 161.654 94.5692 161.487 94.8822 161.297C95.5062 160.92 96.2099 160.462 96.9617 159.941C98.4641 158.897 100.149 157.627 101.607 156.388C102.337 155.767 103.01 155.153 103.59 154.559C104.173 153.946 104.66 153.41 105.091 152.625C105.291 152.217 105.546 151.72 105.535 150.819C105.522 150.381 105.389 149.821 105.08 149.34C104.777 148.851 104.331 148.486 103.933 148.28C103.113 147.872 102.536 147.888 102.034 147.891C101.532 147.915 101.077 147.996 100.578 148.113C98.3492 148.653 96.6017 149.336 95.2002 150.326C94.5035 150.823 93.8942 151.406 93.4197 152.101C92.9444 152.788 92.619 153.592 92.4935 154.404C92.3642 155.219 92.4287 156.027 92.6155 156.761C92.803 157.495 93.1055 158.167 93.4725 158.788C94.2119 160.031 95.2068 161.106 96.3524 162.108C98.6462 164.093 101.582 165.797 104.553 167.056C106.039 167.681 107.532 168.19 108.972 168.547C110.416 168.896 111.799 169.102 113.144 169.059C121.267 168.78 130.874 167.063 140.04 164.027C149.203 160.982 157.919 156.641 164.198 150.851C166.631 148.598 168.414 145.752 169.511 142.754C170.601 139.756 171.02 136.591 170.536 133.616C170.29 132.129 169.809 130.684 169.034 129.376C168.263 128.067 167.187 126.898 165.838 126.024C164.489 125.143 162.885 124.564 161.107 124.324C159.325 124.079 157.369 124.16 155.227 124.572C154.495 124.716 153.853 124.968 153.2 125.275C152.551 125.586 151.904 125.962 151.266 126.393C149.992 127.256 148.762 128.3 147.782 129.535C147.295 130.156 146.862 130.828 146.561 131.648C146.269 132.455 146.1 133.504 146.459 134.61C146.634 135.154 146.938 135.671 147.316 136.09C147.695 136.509 148.136 136.836 148.596 137.088C149.522 137.589 150.517 137.83 151.667 137.966C156.241 138.478 160.935 137.084 165.416 134.68C169.898 132.265 174.205 128.789 177.957 124.797C181.707 120.801 184.898 116.289 187.071 111.722C189.23 107.155 190.426 102.515 189.86 98.1539C189.539 95.7579 188.903 93.6493 187.967 91.828C187.035 90.0106 185.802 88.4884 184.372 87.2807C181.498 84.8536 177.959 83.7003 174.327 83.1372C170.683 82.5819 166.875 82.6091 163.232 82.7411C159.594 82.877 156.114 83.1216 153.251 83.075C153.876 84.5041 154.5 85.9292 155.125 87.3544C159.561 82.3605 165.684 74.9045 168.902 66.8466C170.498 62.8119 171.387 58.5597 170.733 54.3463C170.406 52.2493 169.678 50.1757 168.488 48.2418C167.301 46.304 165.661 44.5175 163.562 42.9254C163.225 42.673 162.885 42.4285 162.542 42.1993C158.495 39.4655 154.009 38.51 149.661 38.8323C145.3 39.1469 141.05 40.6536 137.042 42.739C129.035 46.9213 121.901 53.4726 116.997 58.5015C118.361 59.0568 119.726 59.6081 121.091 60.1635C121.045 55.7947 120.963 51.527 119.271 46.9446C117.487 42.1293 115.472 38.5179 113.169 35.9083C110.878 33.3065 108.22 31.7144 105.416 31.1979C102.614 30.6775 99.8093 31.2212 97.1784 32.3862C94.5373 33.5551 92.012 35.3452 89.5713 37.5043C84.7005 41.8342 80.1516 47.6825 76.245 53.3754C72.3446 59.0684 69.1032 64.6138 66.9782 68.2602C68.1354 68.5631 69.2927 68.8621 70.4499 69.165C70.2767 64.3653 70.0954 57.5966 68.0096 52.1289C66.958 49.3989 65.3837 46.9252 62.9279 45.3524C60.4744 43.7681 57.2536 43.271 53.4453 44.1292C48.7422 45.1661 44.8379 47.3795 41.6493 50.3114C38.4568 53.2472 35.963 56.8859 33.96 60.8275C29.9605 68.7223 27.8907 77.8753 26.3638 85.4012C26.1079 86.6633 28.3672 87.1409 28.6441 85.8866Z"
                              d="M20.8202 45.0001C18.4702 45.4801 16.1202 46.0001 13.7602 46.4501C11.3124 47.0029 8.80953 47.2746 6.30015 47.2601C5.74571 47.2583 5.2006 47.1173 4.71486 46.85C4.22912 46.5826 3.81831 46.1976 3.52016 45.7301C2.69418 44.6045 2.17083 43.2858 2.00016 41.9001C1.77542 40.0839 1.40761 38.2884 0.900157 36.5301C0.785356 36.072 0.784576 35.5927 0.897891 35.1342C1.01121 34.6757 1.23516 34.252 1.55015 33.9001C1.73015 33.6301 1.92016 33.3801 2.04016 33.2001C5.35016 32.7101 8.59016 32.2001 11.8202 31.7301C14.1502 31.3601 16.4702 30.9101 18.8202 30.5601C19.8202 30.4101 20.8202 30.4501 21.8202 30.3601C22.5702 30.2901 23.3102 30.1601 24.2402 30.0301C23.3502 29.1201 22.6102 28.3901 21.8902 27.6401C17.8902 23.4501 13.8902 19.2501 9.89015 15.0801C9.71432 14.9344 9.59363 14.733 9.54815 14.5092C9.50267 14.2854 9.53514 14.0529 9.64015 13.8501C10.0002 12.5201 11.0002 11.6001 11.7202 10.5001C12.4407 9.70899 13.4338 9.2196 14.5002 9.1301C15.9102 8.8201 17.3502 8.6201 18.7302 8.2301C19.239 8.0432 19.7901 8.00317 20.3206 8.11457C20.851 8.22597 21.3395 8.48431 21.7302 8.8601C22.8902 9.9501 23.9902 11.1001 25.1002 12.2501C25.4189 12.608 25.7193 12.9818 26.0002 13.3701L26.3002 13.2101C26.3002 12.9601 26.3602 12.7201 26.3502 12.4701C26.1743 9.38478 26.3049 6.28963 26.7402 3.2301C26.798 2.72042 26.7572 2.20438 26.6202 1.7101C26.5877 1.62098 26.5739 1.52612 26.5798 1.43145C26.5856 1.33678 26.6109 1.24433 26.6541 1.15988C26.6972 1.07542 26.7574 1.00077 26.8307 0.94059C26.904 0.880408 26.9889 0.835987 27.0802 0.810101C27.5002 0.620101 27.8902 0.360098 28.3602 0.100098L36.4502 1.1001C36.9265 1.16758 37.3976 1.26783 37.8602 1.4001C38.28 1.51599 38.6647 1.73356 38.9804 2.03356C39.2961 2.33356 39.533 2.70675 39.6702 3.1201C40.2209 4.82589 40.4316 6.62319 40.2902 8.4101C40.2902 12.7501 40.2902 17.0901 40.2202 21.4101C40.2202 21.7401 40.2202 22.0801 40.2202 22.6401C40.4983 22.45 40.7593 22.2358 41.0002 22.0001C43.8468 18.5934 46.6868 15.1801 49.5202 11.7601L58.0002 1.5901C59.1202 2.1701 60.3202 2.0801 61.2302 2.9601C61.6094 3.2595 61.898 3.65827 62.064 4.11203C62.2299 4.56578 62.2667 5.05669 62.1702 5.5301C62.0938 5.8523 62.0882 6.18723 62.1539 6.5118C62.2195 6.83636 62.3547 7.14284 62.5502 7.4101C62.73 7.69627 62.8775 8.00146 62.9902 8.3201C63.0482 8.43824 63.0823 8.56668 63.0906 8.69805C63.0989 8.82941 63.0811 8.96112 63.0384 9.08561C62.9957 9.2101 62.9288 9.32494 62.8415 9.42352C62.7543 9.5221 62.6485 9.6025 62.5302 9.6601C61.8488 10.1191 61.2096 10.6378 60.6202 11.2101C60.2905 11.4903 60.0158 11.8294 59.8102 12.2101C58.1102 15.7301 55.4402 18.5601 53.1102 21.6301C52.4102 22.5501 51.6402 23.4201 50.9402 24.3401C50.6584 24.7856 50.4078 25.25 50.1902 25.7301C51.3302 25.6001 52.1902 25.5201 53.0802 25.3901L69.8202 22.8501C70.2802 22.7801 70.8202 22.4901 71.1602 22.6701C71.8247 23.0297 72.3832 23.5572 72.7802 24.2001C72.8642 24.3958 73.0036 24.5625 73.1813 24.6798C73.359 24.7971 73.5672 24.8598 73.7802 24.8601C74.4058 24.9531 74.991 25.2256 75.4649 25.6444C75.9388 26.0633 76.281 26.6106 76.4501 27.2201C76.9137 28.7402 77.2877 30.2862 77.5702 31.8501C77.6902 32.4101 77.7502 32.9901 77.8302 33.5501C78.0402 34.9201 77.5302 35.4601 76.1602 35.6101C73.7202 35.8701 71.2702 36.1201 68.8602 36.6101C63.7502 37.6101 58.6702 38.6701 53.5702 39.7101C53.4101 39.7569 53.2531 39.8137 53.1002 39.8801C53.29 40.2324 53.5109 40.567 53.7602 40.8801C57.3798 44.7109 61.2231 48.3239 65.2701 51.7001C66.3601 52.5701 67.4902 53.4001 68.5302 54.3301C68.9715 54.7694 69.3305 55.2842 69.5901 55.8501C69.6627 56.0068 69.7003 56.1774 69.7003 56.3501C69.7003 56.5228 69.6627 56.6934 69.5901 56.8501C68.2801 59.3401 66.8202 61.7501 64.3502 63.2601C63.7867 63.6624 63.1378 63.9286 62.4542 64.0379C61.7706 64.1473 61.0709 64.0967 60.4102 63.8901C59.8573 63.7367 59.273 63.7367 58.7202 63.8901C58.4428 63.9632 58.15 63.9518 57.8792 63.8573C57.6084 63.7629 57.3719 63.5898 57.2002 63.3601C54.5702 60.6001 52.0002 57.8501 49.3202 55.2001C47.3202 53.2701 45.3202 51.4701 43.2602 49.6101C42.6002 49.0001 42.0002 48.3801 41.0702 47.5501C41.0702 48.8101 41.0002 49.7501 41.0702 50.6801C41.5102 55.4801 41.9902 60.2801 42.4602 65.0901C42.5668 65.5527 42.6238 66.0254 42.6302 66.5001C42.5354 66.9491 42.3164 67.3624 41.9981 67.693C41.6799 68.0237 41.2752 68.2583 40.8302 68.3701C39.2702 69.0001 37.6402 69.4701 36.1002 70.1201C35.6831 70.304 35.2276 70.3837 34.7729 70.3524C34.3182 70.321 33.878 70.1795 33.4902 69.9401C33.0302 69.6901 32.6002 69.4001 32.1102 69.1101L30.1102 51.7501C29.8541 51.9842 29.6136 52.2348 29.3902 52.5001C27.0568 55.7601 24.7235 59.0234 22.3902 62.2901C20.7768 64.5768 19.1835 66.8768 17.6102 69.1901C17.2704 69.8321 16.6968 70.319 16.0081 70.5498C15.3193 70.7806 14.5682 70.7378 13.9102 70.4301C11.7035 69.7001 9.64947 68.5714 7.85015 67.1001C7.57895 66.898 7.3278 66.6703 7.10015 66.4201C6.90191 66.2331 6.74397 66.0076 6.63601 65.7574C6.52806 65.5072 6.47237 65.2376 6.47237 64.9651C6.47237 64.6926 6.52806 64.423 6.63601 64.1728C6.74397 63.9226 6.90191 63.6971 7.10015 63.5101C9.07508 61.2864 10.9182 58.9491 12.6202 56.5101C14.4402 53.8001 16.5402 51.2901 18.4902 48.6701C19.3202 47.5601 20.0802 46.4101 20.8702 45.2801L20.8202 45.0001ZM36.5702 61.8201C36.323 63.1073 36.5429 64.4404 37.1902 65.5801L36.5702 61.8201Z"
                              duuu="M139.351 91.584C134.726 87.8171 128.479 86.2009 122.07 85.9709C115.649 85.7596 109.004 86.953 103.41 89.2343C100.607 90.3843 98.0705 91.8015 95.9509 93.5171C93.8374 95.2327 92.1281 97.2591 91.1397 99.6461C90.1514 102.021 89.9774 104.774 90.8538 107.46C91.724 110.151 93.5267 112.743 96.2617 115.273C99.2764 118.07 102.851 119.786 106.611 120.544C110.372 121.309 114.307 121.147 118.223 120.327C126.055 118.679 133.875 114.434 140.451 109.032C147.021 103.612 152.355 97.0602 155.003 90.4091C156.314 87.0836 156.954 83.6897 156.557 80.389C156.171 77.1007 154.642 73.9368 151.957 71.4753C149.309 69.02 146.008 67.5903 142.496 66.9997C138.978 66.4092 135.217 66.6206 131.388 67.4038C123.73 68.9827 115.73 72.8552 108.743 77.9398C101.769 83.0369 95.808 89.3275 92.4327 96.0656C90.7544 99.4409 89.7226 102.953 89.6853 106.502C89.6356 110.039 90.6425 113.601 92.8616 116.734C95.149 119.991 98.1016 122.397 101.396 123.951C104.691 125.511 108.308 126.244 112.001 126.325C119.404 126.48 127.168 124.093 134.03 120.165C140.886 116.218 146.872 110.704 150.509 104.227C152.317 100.989 153.536 97.4891 153.878 93.8404C154.226 90.204 153.672 86.4185 152.044 82.7821C149.228 76.4667 145.213 71.6618 140.432 68.3549C135.659 65.0417 130.17 63.2267 124.451 62.6175C113.008 61.4116 100.644 64.8552 89.8407 70.8101C79.0497 76.8023 69.7817 85.312 64.7903 94.9095C62.3101 99.7082 60.9114 104.824 61.1414 110.002C61.359 115.174 63.286 120.333 67.0777 124.902C71.3605 130.092 76.5696 133.703 82.2323 135.848C87.8951 137.999 93.9928 138.695 100.14 138.247C112.442 137.34 124.986 131.919 135.491 123.857C145.977 115.776 154.468 105.023 158.291 93.0509C160.199 87.0711 160.908 80.7681 160.025 74.4465C159.149 68.131 156.662 61.8156 152.342 55.8669C147.96 49.8188 142.676 45.5608 136.908 42.9936C131.146 40.414 124.942 39.5251 118.745 39.9665C106.344 40.8616 93.9245 46.8911 83.5936 55.5251C73.2689 64.1839 64.9829 75.497 61.1912 87.4938C59.3078 93.4922 58.5619 99.6833 59.3762 105.75C60.1905 111.811 62.6023 117.728 66.8478 122.981C71.7957 129.141 78.1857 133.355 85.2843 135.835C92.383 138.316 100.184 139.111 108.196 138.583C124.221 137.52 141.16 131.254 155.525 121.93C169.871 112.581 181.707 100.193 187.071 86.3004C189.744 79.3571 190.745 71.9912 189.414 64.6439C188.097 57.2967 184.454 50.055 178.25 43.3728C169.088 33.4708 157.203 27.7024 144.249 25.3279C131.276 22.9472 117.203 23.8733 103.193 27.261C75.1958 34.0613 47.3792 50.6331 29.2845 71.6307C22.3537 79.6928 16.921 88.4822 13.6016 97.6508C10.2885 106.813 9.10755 116.379 10.7051 125.803C12.2901 135.226 16.6476 144.451 24.1067 152.979C31.5721 161.52 42.1144 169.402 56.2122 176.407C56.6473 176.625 57.1633 176.239 57.3622 175.873C57.5611 175.5 57.5984 174.859 57.1757 174.617C43.743 166.797 34.102 158.48 27.6125 150.095C21.1168 141.691 17.7539 133.25 16.7345 124.914C15.7213 116.578 17.0515 108.293 20.2403 100.15C23.4353 92.0129 28.5138 84.044 34.9722 76.5227C51.8113 56.8988 78.5586 40.8989 104.958 34.5275C118.148 31.32 131.227 30.512 142.9 32.6565C154.586 34.8134 164.83 39.8359 172.812 48.4202C178.201 54.2321 181.066 60.1063 182.135 65.9617C183.192 71.8172 182.446 77.741 180.19 83.6648C175.702 95.4876 164.942 107.087 151.54 115.801C138.157 124.541 122.182 130.409 107.718 131.366C100.482 131.857 93.6448 131.13 87.6526 129.041C81.6604 126.947 76.5074 123.534 72.4173 118.487C68.9798 114.229 67.1088 109.648 66.4374 104.793C65.7723 99.9382 66.3379 94.7976 67.9541 89.6135C71.174 79.2452 78.6768 68.8086 88.1002 60.8957C97.5049 52.9703 108.793 47.6121 119.242 46.8724C124.47 46.4994 129.48 47.2329 134.111 49.2842C138.736 51.3417 143.031 54.7232 146.81 59.8949C150.527 64.992 152.554 70.1823 153.299 75.3913C154.039 80.6003 153.48 85.8528 151.857 91.0121C148.625 101.312 141.017 111.183 131.425 118.586C121.853 126.002 110.341 130.919 99.6556 131.714C94.3098 132.118 89.188 131.515 84.5322 129.762C79.8702 128.003 75.662 125.125 72.0505 120.787C69.0668 117.175 67.7428 113.52 67.5501 109.704C67.3636 105.899 68.3768 101.871 70.4529 97.8247C74.5803 89.7378 82.9906 81.7876 92.8864 76.2927C102.77 70.7729 114.095 67.7146 123.805 68.7465C128.672 69.25 133.122 70.7418 136.958 73.3836C140.793 76.0316 144.069 79.8419 146.512 85.2623C147.724 87.9538 148.115 90.608 147.873 93.2871C147.637 95.96 146.735 98.664 145.268 101.306C142.353 106.589 137.132 111.531 131.071 115.031C125.017 118.543 118.142 120.6 112.125 120.476C109.11 120.42 106.319 119.836 103.882 118.692C101.44 117.536 99.3262 115.839 97.5858 113.396C96.0691 111.233 95.4288 109.014 95.4413 106.558C95.4537 104.103 96.1809 101.405 97.5609 98.6142C100.308 93.0198 105.679 87.183 112.081 82.4962C118.471 77.7969 125.887 74.2289 132.513 72.8552C135.826 72.159 138.928 72.0161 141.589 72.4574C144.255 72.8987 146.456 73.8933 148.234 75.5157C149.999 77.1567 150.844 78.9282 151.13 81.0603C151.404 83.1861 151.006 85.7037 149.943 88.42C147.829 93.859 143.043 99.9382 137.039 104.899C131.046 109.878 123.848 113.75 117.135 115.167C113.778 115.882 110.558 115.988 107.643 115.41C104.728 114.819 102.111 113.57 99.7862 111.444C97.505 109.355 96.2927 107.453 95.783 105.868C95.2795 104.277 95.3667 102.972 95.9075 101.598C96.4607 100.237 97.5608 98.8194 99.1894 97.4954C100.806 96.1714 102.925 94.953 105.343 93.9522C110.192 91.9507 116.24 90.8256 121.909 91.0058C127.584 91.1675 132.818 92.6593 136.199 95.4378C137.262 96.3081 138.835 96.1527 139.705 95.0836C140.569 94.0206 140.414 92.4542 139.351 91.584Z"
                              fill="rgba(240, 220, 160, 1)" 
                              filter="url(#warbleFilter)"
                            />
                          </svg>
                        </div>
                      </div>
                    </div>
            </div>
            {/each}
          </div>
          
          <div
            class="absolute top-0 left-0 z-50 w-full h-full origin-bottom-right scale-130"
            style="
              transform: translateX(0.2%) translate3d({smoothX * -2.4}%, {smoothY * -13 + 30}px, 0) scale({0.3 * (1 - dist01 * 0.02)});
              filter: blur({easeInOutCubic(Math.max(0, (dist01 - 0.6)) * 2) * 5}px)"
          >

            <div class={cx(characterhover && "boop-anim", "absolute translate-x-[-60%] right-0 bottom-0 p-12 rounded-[3rem] outline-black -scale-x-150 scale-y-150")}>

              <button class="absolute top-[5%] left-[35%] w-[30%] h-[90%] z-400"
                onfocus={figureTalk} ontouchstart={figureTalk} onmouseover={figureTalk}
                onblur={figureTalkEnd} ontouchend={figureTalkEnd} onmouseleave={figureTalkEnd}
                aria-label="Figure"
                tabindex="0"
              ></button>


              <svg width="0" height="0" class="absolute">
                <filter id="figsketch">
                  <feTurbulence 
                    type="turbulence" 
                    baseFrequency={baseFrequency2}
                    numOctaves="2" 
                    result="noise" />
                  <feDisplacementMap 
                    in="SourceGraphic" 
                    in2="noise" 
                    scale={scale2}
                    xChannelSelector="R" 
                    yChannelSelector="G" />
                </filter>
              </svg> 

              <div style="position: relative; width: {figureWidth}px; height: {figureHeight}px; filter: url(#figsketch);">

                <div
                  class={cx("absolute top-0 left-0 z-20 w-full h-full", characterhover && "hidden")}
                  style="
                    -webkit-mask-image: url({figure});
                    mask-image: url({figure});

                    -webkit-mask-size: cover;
                    mask-size: cover;

                    -webkit-mask-repeat: no-repeat;
                    mask-repeat: no-repeat;

                    -webkit-mask-position: center;
                    mask-position: center;

                    isolation: isolate;
                  "
                >
                  <img
                    src="{figure}"
                    class="block object-cover absolute w-full h-full"
                    alt="base bg"
                  />
                      <div
                      style="width: 300%; opacity: {Math.max(Math.min(dist01 * 0.6 + 0.3, 1), 0)}; "
                      class="absolute top-0 left-0 h-full bg-gradient-to-tr to-amber-200/90 from-0% to-70% from-slate-950 mix-blend-multiply"></div>
                      <div
                      style="width: 300%; opacity: {1 - Math.max(0, dist01 * 3)};"
                      class="absolute top-0 left-0 h-full bg-gradient-to-tr to-amber-300/60 from-0% to-70% mix-blend-overlay from-indigo-900"></div>
                </div>

                <div
                  class={cx("absolute top-0 left-0 z-20 w-full h-full", !characterhover && "hidden")}
                  style="
                    -webkit-mask-image: url({figure2});
                    mask-image: url({figure2});

                    -webkit-mask-size: cover;
                    mask-size: cover;

                    -webkit-mask-repeat: no-repeat;
                    mask-repeat: no-repeat;

                    -webkit-mask-position: center;
                    mask-position: center;

                    isolation: isolate;
                  "
                >
                  <img
                    src="{figure2}"
                    class="block object-cover absolute w-full h-full"
                    alt="base bg"
                  />
                      <div
                      style="width: 300%; opacity: {Math.max(Math.min(dist01 * 0.6 + 0.3, 1), 0)}; "
                      class="absolute top-0 left-0 h-full bg-gradient-to-tr to-amber-200/90 from-0% to-70% from-slate-950 mix-blend-multiply"></div>
                      <div
                      style="width: 300%; opacity: {1 - Math.max(0, dist01 * 3)};"
                      class="absolute top-0 left-0 h-full bg-gradient-to-tr to-amber-300/60 from-0% to-70% mix-blend-overlay from-indigo-900"></div>
                </div>

              </div>
            </div>

            <div
            class="absolute flex items-center z-[430] top-0 right-0 w-20 h-80 -translate-x-1/2 translate-y-[-150%] pointer-events-none"
            style="transform: translate({smoothX * -30 - 1000}px, {smoothY * -30}px)"
            >
              <div
                class={cx(
                  "absolute origin-right right-[100%] transition-transform duration-700 ease-[cubic-bezier(0, 1, 0, 1)]",
                  characterhover && "-translate-x-40",
                  !characterhover && "translate-x-55"
                )}
              >
                <div
                  class={cx(
                    "w-40 h-20 bg-zinc-950/90 max-h-[84rem] overflow-clip transition-all rounded-[3rem] border-3 duration-300 ease-[cubic-bezier(1,0,0,1)]",
                    characterhover && "w-[80rem] h-fit",
                  )}
                >
                  <p class={cx("absolute translate-y-1/2 -mt-14 w-full transition-[opacity] duration-300 h-full text-7xl align-middle text-center", characterhover && "opacity-0")}>...</p>

                  <div aria-hidden="true" class={cx(
                    "overflow-clip rounded-4xl leading-relaxed text-5xl transition-[opacity, font-size, line-height] duration-400 px-20 py-15",
                    characterhover && "opacity-100 ease-out delay-300 ",
                    !characterhover && "opacity-0 ease-in delay-0",
                  )}>
                    Hello, my name is...
                    <span class="font-black text-blue-500">
                      {#each "Frostbiiten!" as char, i}
                        <span
                          class="inline-block animate-wave"
                          style="animation-delay: {-i * 50}ms"
                        >
                          {char}
                        </span>
                      {/each}
                    </span>
                    <br/>
                    <br/>

                    Most people gaze neither into the past nor the future; they explore neither truth nor lies. They gaze at the television.
                    <br/>
                    <span class="italic text-slate-700">-the ok computer</span>

                    <br/>
                    <br/>

                    <span class="italic text-slate-500">
                    sob sob sob sob sob
                    sob sob sob sob sob
                    </span>
                    <br/>
                    <span class="italic text-slate-700">- <strong>me</strong> on a sunday night, probably.</span>

                    <br/>
                    <br/>
                    Then the four angels who had been prepared for this hour and day and month and year were turned loose to kill one-third of all the people on earth. 16 I heard the size of their army, which was 200 million mounted troops.


                  </div>

                </div>
              </div>
            </div>

            <img
              class="absolute right-0 opacity-0 pointer-events-none figure"
              src={figure}
              alt="Dummy"
              onload={handleLoad}
            />

            <div  class="absolute bottom-0 right-0 z-[5] w-80 h-80 mix-blend-difference origin-right"
                  style="transform: translate3d({450 + smoothX * -48}px, { smoothY * -8 - 650}px, 0) scale({2 *(1 - dist01 * 0.)});
                      filter: blur({(dist01) * 4}px); opacity:{easeInOutCubic(1 - dist01)}"
            >
              <svg viewBox="0 0 300 300" class="opacity-0 fill-white">
                <defs>
                  <filter id="warbleFilter">
                    <feTurbulence 
                      type="turbulence" 
                      baseFrequency={baseFrequency} 
                      numOctaves="2" 
                      result="turbulence"
                    />
                    <feDisplacementMap 
                      in="SourceGraphic" 
                      in2="turbulence" 
                      scale={scale} 
                      xChannelSelector="R" 
                      yChannelSelector="G"
                    />
                  </filter>
                </defs>
                
                <path 
                  d="M84.2,24c0.5,0.7,1.2,1.3,1.3,2c0.1,1,0.2,2-0.4,3.2c-1.1,2.1-2,4.2-4.7,4.6c-0.9,1.3-2.4,1.6-3.5,2.4  c-0.9,0.7-2.3,0.4-3,1.6c-0.6,1-1.4,1.9-2.7,2.2c-0.4,0.1-0.8,0.4-1.3,0.7c0.2,0.2,0.4,0.4,0.6,0.7c-2.2,1.2-3.5,3.1-4.9,5.1  c-0.2,0.3-0.5,0.4-0.7,0.7c-0.6,0.6-1.2,1.2-1.7,2c-0.5,0.9-0.4,1.9,0,2.8c0.7,1.8,1,3.9,2.1,5.5c0.1,0.2,0.3,0.3,0.3,0.5  c-0.3,2.1,0.9,3.9,1.1,5.9c0.2,1.5,1.3,2.6,1.4,4c0.1,0.7-0.1,1.6,0.4,2.3c0.5,0.6,0.5,1.6,0.8,2.4c0.3,0.9,0.7,1.7,1,2.6  c0.3,0.8,0.7,1.6,0.9,2.4c0.4,1.4,0.7,2.8,0.9,4.2c0.2,1.2-0.2,2.4,1,3.3c0.2,0.2,0.2,0.7,0.2,1.1c0,1.1,0.1,2.2,0,3.3  c-0.1,1-0.5,2.1-0.6,3.1c-0.1,1.1-0.9,1.8-1.6,2c-0.6,0.2-1.3,1.4-2.3,0.3c-0.3-0.4-1.4,0-2-0.3c-2.5-1-4-3-5.1-5.4  c-0.2-0.3-0.1-0.8-0.2-1.1c-0.3-0.8-1.9-0.5-1.7-2c0.1-0.7-1.1-1.5-1.7-2.3c-0.5-0.8-0.9-1.7-1.5-2.4c-0.6-0.8-1.4-1.5-2.1-2.2  c-0.2-0.2-0.6-0.4-0.6-0.7c0-1.9-1.9-2.4-2.6-3.7c-0.3-0.6-1.1-0.9-1.6-1.4c-0.6-0.6-1.1-1.4-1.7-2c-0.6-0.5-1.2-0.9-1.9-1.3  c-0.4-0.2-0.8-0.5-1.3-0.6c-1.2-0.5-1.8-0.5-2.3,0.5c-0.5,1.1-1.3,1.7-2.3,2.4c-0.8,0.6-1,2.1-2.4,2.3c-0.3,1.5-2,1.7-2.8,2.7  c-0.7,0.9-1.4,1.9-2.1,2.7c-1.2,1.3-2.4,2.5-3.6,3.7c-0.4,0.4-1,0.8-1.3,1.3c-0.7,1.5-1.4,2.8-3.2,3.2c-0.1,0-0.1,0.1-0.2,0.2  c-0.7,0.6-0.6,1.9-1.8,2.1c-0.9,0.2-1.8,0.6-2.9,1c-0.2-0.1-0.7-0.3-1.2-0.5c-1.5-0.8-1.7-1.9-1.5-3.8c0.3-2.6,1.7-4.5,3.3-6.3  c1.1-1.3,1.8-2.7,2.3-4.2c0.5-1.5,1.4-3,1.2-4.7c0-0.1,0.3-0.3,0.3-0.5c0.2-1.3,1.7-1.8,1.6-3.4c-0.1-1,0.9-2.1,1.1-3.2  c0.1-0.9,0.5-1.4,1-2.1c0.4-0.5,0.5-1.2,0.7-1.8c0.3-0.7,0.9-1.9,0.7-2c-1.1-0.8,0.4-1.3,0.2-2c-0.2-0.9-0.3-1.5-1.3-2  c-3.6-1.8-7.1-4-11.1-4.9c-2-0.4-2.9-3.4-2.6-5.5c0.4-2.1,2-2.6,3.4-3.6c0.1,0,0.2,0,0.3,0c1.1-0.2,1.9-0.9,2.8-1.4  c0.9-0.5,2.1-0.3,3-0.8c1.4-0.7,2.7-0.9,4.2-0.9c0.9,0.1,1.7,0.1,2.5-0.8c0.3-0.4,1.3-0.5,1.9-0.4c1.1,0.1,1.9-0.4,2.8-0.8  c0.4-0.1,0.8-0.7,0.8-1.1c0.2-1.7,1.4-3.1,1.4-5c0-1.5,1.5-2.9,1.6-4.4c0.1-3,1.9-5.8,1.4-8.9c-0.2-1,0.4-2.1,0.5-3.2  c0.1-1.2-0.2-2.5,0.1-3.6C41.6,7.9,42,6,44,4.9c0.8-0.4,1.3-0.5,2.1,0c1.3,0.8,2.6,1.4,4,2.2c0.3,0.2,0.7,0.6,0.7,0.9  c0.4,1.6,1.3,2.9,2.1,4.3c0.2,0.3,0.4,0.7,0.4,1.1c0,1.7,0.5,3.2,1.1,4.7c0.2,0.4,0.2,1,0.1,1.5c-0.2,2.5,0.8,4.7,2,6.8  c0.3,0.5,0.3,1.3,0.4,2c0.2,1.4,0.7,1.9,2.1,1.8c0.2,0,0.5,0.1,0.6,0c2.1-1.9,5-1.8,7.5-2.6c0.5-0.2,1.1-0.5,1.6-0.4  c0.9,0.1,1.5-0.4,2.2-0.6c1.2-0.4,2.5-0.8,3.8-1.2c1.1-0.4,2.1-1.1,3.2-1.2C79.9,23.9,81.9,24,84.2,24z M42.9,57.3  c1-1.3,1.8-2.3,2.6-3.2c0.9-1,1.9-1.8,2.8-2.8c0.8-0.9,2.1-1.3,2.5-2.5c1.9-0.6,1.9-2.2,1.8-3.7c-0.1-1.5-0.5-3-0.7-4.5  c-0.8,0-1.5-0.2-1.9,0c-1.7,1.3-3.8,1.2-5.6,1.9c-0.5,0.2-0.8,0-1.1,0c-1,0.1-2,0.4-2.9,0.9c-0.4,0.2-0.4,1-0.6,1.5  c-0.7,2.1-0.9,4.4-2.4,6.2c0.9,0.9,1.1,2.3,2.7,2.9C41.2,54.5,41.9,56,42.9,57.3z M60,72.2c0-0.6,0.2-1.3,0-1.5  c-0.8-0.7-0.6-1.5-0.6-2.2c0.1-1.4-0.2-2.7-1.1-3.8c-0.4-0.5-0.4-1.4-0.8-1.8c-0.7-0.6-0.1-1.2-0.3-1.8c-0.5-1.1-0.3-2.5-1.4-3.4  c-0.1-0.1,0.3-0.9,0.5-1.6c-2,0.6-3.2,1.7-4.2,3c-0.3,0.4-0.6,1-0.9,1.4c-1.1,1.3-1.2,2-0.3,3.3c0.3,0.5,0.8,0.9,1.2,1.3  c1.3,1.2,2.5,2.5,4.1,3.4C57.6,69.4,58.2,71.3,60,72.2z M46.8,20.4c-0.3,0.5-0.6,1-0.8,1.5c-0.1,0.4,0.1,0.8-0.1,1.2  c-0.8,2-1.6,4-1.2,6.2c0,0.1-0.3,0.3-0.4,0.4c-1,1.5-0.8,3.1-0.8,4.5C45,34.9,46,34,47,33.6c1.1-0.5,2.2-1.2,3.4-1.8  c-1.1-0.8-1.6-1.6-1.4-2.9c0.2-2-0.7-3.9-1.3-5.8C47.4,22.2,47.2,21.4,46.8,20.4z M35.1,60.6c-0.3,0.5-0.6,1-0.7,1.6  c-0.3,0.8-0.3,1.7-0.6,2.4c-0.3,0.9-0.8,1.7-1.2,2.5c-0.2,0.4-0.4,0.9-0.7,1.6c1.4-1.1,2.6-1.7,3.5-2.7c0.9-1,1.4-2.4,2.2-3.8  C36.8,61.6,36,61.1,35.1,60.6z M32.2,48.5c0.6-1.3,1.4-2.3,0.7-3.7c-2.1-0.7-3.3,1.8-5.2,1.5C29.1,47,30.6,47.7,32.2,48.5z M61.8,38  c-0.9,0.1-1.7,0.1-3,0.2c0.9,0.9,1.4,1.3,2,1.9C61.1,39.4,61.4,38.8,61.8,38z"
                  filter="url(#warbleFilter)"
                />
              </svg>
            </div>
          </div>

          <div
            style="transform: translate3d({smoothX * -55 * 0.4}px, {smoothY * -13 * 0.6}px, 0) scale({0.3 + 1.2 * (1 - dist01 * 0.03)});"
            class="absolute z-[15] origin-bottom-right inset-0 h-[120%] w-[120%] bg-transparent bg-[linear-gradient(to_right,rgba(128,128,128,0.07)_1px,transparent_1px),linear-gradient(to_bottom,rgba(128,128,128,0.07)_1px,transparent_1px)] bg-[size:24px_24px]"></div>

          <div class={cx("font-mono relative z-[30] select-none transition-all duration-200", !characterhover && "opacity-100", characterhover && "opacity-0")}>
            <h1 class="z-40 text-8xl font-bold">
              {#each Array.from("Edem") as char, index}
                  <span
                  class="inline-block animate-text-reveal"
                  style="animation-delay: {index * 0.05 - 0.5}s; animation-fill-mode: backwards;"
                  >
                  {@html char === ' ' ? '&nbsp;' : char}
                  </span>
              {/each}
            </h1>
            <h2 class="z-40  px-1 text-2xl transition-all tracking-[0.3em] text-slate-500">Hoggar</h2>
            <div>

            <div class="h-5"></div>


            <div class="py-3 tracking-[0.02em] leading-10 font-mono  px-4 mt-6 w-130 text-slate-300 rounded-sm bg-zinc-950/[0.0] h-60">
            <p class="flex flex-row flex-wrap items-center">
              Studying <strong class="pl-2"> CS</strong>
              <a href="https://cs.uwaterloo.ca/" target="_blank" rel="noopener noreferrer"
                class="flex z-40 flex-row gap-2 items-center px-1 pl-3 w-56 font-bold text-sky-600 transition-all group-hover:text-sky-500 group">
                <span class="tracking-widest duration-200 text-nowrap transition-color group-hover:text-sky-500">@ University of Waterloo</span> <Fa class="duration-200 scale-90 group-hover:scale-100" icon={faSquareArrowUpRight}></Fa>
              </a>

              Pursuing Summer 2025 Software Development roles.
              Check out my contacts below for any inquiries.
            </p>

            </div>
            </div>
          </div>

          <div class={cx("flex absolute bottom-0 left-0 z-40 duration-200 gap-4 items-end p-10 px-16 w-full text-lg text-gray-500", !characterhover && "opacity-100", characterhover && "opacity-0")}>
            <a
            href="https://github.com/Frostbiiten" target="_blank" rel="noopener noreferrer" class="transition-all duration-200 hover:text-sky-100">
            <Fa icon={faGithub}/>
            </a>
            
            <a
            href="https://www.linkedin.com/in/edem-hoggar/" target="_blank" rel="noopener noreferrer" class="transition-all duration-200 hover:text-sky-100">
              <Fa icon={faLinkedinIn}/>
            </a>

            <a href="https://www.linkedin.com/in/edem-hoggar/" target="_blank" rel="noopener noreferrer" class="transition-all duration-200 hover:text-sky-100">
              <Fa icon={faAt}/>
            </a>

            <a href="https://x.com/frostbiiten" target="_blank" rel="noopener noreferrer" class="transition-all duration-200 hover:text-sky-100">
              <Fa icon={faTwitter}/>
            </a>
          </div>

        </div>

          <div class="absolute top-0 left-0 w-full h-full overflow-clip rounded-lg mix-blend-soft-light">
            <div class="overflow-hidden relative w-full h-full rounded-xl scale-140">
              <div class="absolute top-0 left-0 w-full h-full z-9999 grain">
              </div>
            </div>
          </div>
      </div>

      <div class="z-2 flex bg-zinc-950 relative duration-200 transition-[border-color] flex-row w-full max-w-7xl h-72 overflow-clip rounded-xl border-2 select-none border-blue-950/50 hover:border-blue-700/40">
        <a
          onfocus={() => {setInfo("projects")}}
          onmouseover={() => {setInfo("projects")}}
          onblur={clearInfo}
          onmouseleave={clearInfo}
          href={base + "/projects"}
          class="h-full relative group basis-1/3 transition-[flex-basis] duration-600 overflow-clip">
          <img
            alt="project bg"
            class="
              object-cover w-full h-full origin-top-left
              transition-[transform, opacity]
              scale-140 translate-x-[-30%] group-hover:translate-x-[-25%] group-focus:translate-x-[-25%] opacity-10 group-hover:opacity-100 group-focus:opacity-100
              duration-500 ease-[cubic-bezier(0.45,0,0,1)]"
            src={projectImg}/>
          <div class="
            absolute top-0 left-0 w-full h-full mix-blend-hard-light z-[2] transition-colors duration-400 
            bg-[linear-gradient(-30deg,_#09080F_-106%,_#182D97_95.51%)]
            ">
          </div>
          <h4 class="absolute transition-[font-size, color] font-mono text-indigo-400/50 group-hover:text-blue-600 group-focus:text-blue-600 z-[2] duration-600 top-4 left-6 text-[1.7rem]">Projects</h4>
        </a>

        <a
          onfocus={() => {setInfo("blog")}}
          onmouseover={() => {setInfo("blog")}}
          onblur={clearInfo}
          onmouseleave={clearInfo}
          href={base + "/blog"}
          class="h-full relative group basis-1/3 transition-[flex-basis] duration-600 overflow-clip">
          <img
            alt="blog bg"
            class="
              object-cover w-full h-full origin-top-left
              transition-[transform, opacity]
              scale-145 translate-x-[-5%] group-hover:translate-x-0 group-focus:translate-x-0 opacity-10 group-hover:opacity-100 group-focus:opacity-100
              duration-500 ease-[cubic-bezier(0.45,0,0,1)]"
            src={blogImg}/>
          <div class="
            absolute top-0 left-0 w-full h-full mix-blend-hard-light z-[2] transition-colors duration-400 
            bg-[linear-gradient(10deg,_#09080F_-106%,_rgba(24,45,151,0.5)_95.51%)]
            ">
          </div>
          <h4 class="absolute transition-[font-size, color] font-mono text-indigo-400/50 group-hover:text-blue-600 group-focus:text-blue-600 z-[2] duration-600 top-4 left-6 text-[1.7rem]">Blog</h4>
        </a>

        <a
          onfocus={() => {setInfo("creative")}}
          onmouseover={() => {setInfo("creative")}}
          onblur={clearInfo}
          onmouseleave={clearInfo}
          href={base + "/creative"}
          class="h-full relative group basis-1/3 transition-[flex-basis] duration-600 overflow-clip">
          <img
            alt="creative bg"
            class="
              object-cover w-full h-full origin-top-left
              transition-[transform, opacity]
              scale-140 translate-x-[-5%] group-hover:translate-x-0 group-focus:translate-x-0 opacity-10 group-hover:opacity-100 group-focus:opacity-100
              duration-500 ease-[cubic-bezier(0.45,0,0,1)]"
            src={creativeImg}/>
          <div class="
            absolute top-0 left-0 w-full h-full mix-blend-hard-light z-[2] transition-colors duration-400
            bg-[linear-gradient(52.89deg,_#09080F_-20%,_#182D97_95.51%)]
            ">
          </div>
          <h4 class="absolute transition-[font-size, color] font-mono text-indigo-400/50 group-hover:text-blue-600 group-focus:text-blue-600 z-[2] duration-600 top-4 left-6 text-[1.7rem]">Creative</h4>
        </a>

      </div>


    <div class="flex relative flex-row gap-2 items-center w-full max-w-7xl select-none">
    <img src={smile} alt="smile" class="hidden object-cover h-5 opacity-25 saturate-50 hue-rotate-210" style="image-rendering: pixelated;">
    <p class={cx("w-full italic transition-colors", !infoText && "text-slate-600", infoText && "text-slate-500")}>
      <span class="font-[Arial] text-xl not-italic font-semibold text-sky-700"></span>
      {#if infoText}
        {infoText}
      {:else}
        Welcome to <span class="font-semibold">my world!</span> Feel free to click around and explore the site. 
      {/if}
    </p>
    </div>
    </div>
</div>

